
  <form [formGroup]="myForm" novalidate (ngSubmit)="save()">
    <div  *ngIf="fetchedQuote._id" class="row">
        <div class="col-12 col-md-4">
          <button type="button" class="btn btn-primary" (click)="downloadPDF()">
          {{'Download PDF' | translate}}
          </button>
        </div>
        <div class="col-12 col-md-4">
          <button type="button" class="btn btn-primary" (click)="sendQuoteByEmailToClient()">
          {{'Send document to client' | translate}}
          </button>
        </div>
        <!-- <div class="col-12 col-md-4">
          <button type="button" class="btn btn-primary" (click)="saveAsInvoice()">
          {{'Create Invoice' | translate}}
          </button>
        </div> -->
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-4">
        <div class="form-group">
          {{'Number' | translate}}
          <input [readonly]="fetchedQuote.drawingSignature.isSigned" class="form-control" name="EstimateCode" type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedQuote.quoteNumber"/>
        </div>
        <div class="form-group">
          <app-autocomplete [search]="search" [displayIfContentIsNull]=true [canDelete]=false [enableLink]=true [typeAutocomplete]="'user'" [title]="'Contact'" [search]="{isExternalUser:true}" [title]="" [singleChoice]="'true'" [arrayContent]="fetchedQuote.clients">
          </app-autocomplete>
          <!-- <app-autocomplete [search]="search" [displayIfContentIsNull]=true [canDelete]=false [enableLink]=true [typeAutocomplete]="'user'" [title]="'Contact'" [search]="{isExternalUser:true}" [title]="" [singleChoice]="'true'" [arrayContent]="fetchedQuote.clients"
            (getResultAutocomplete)="selectUser($event[0])">
          </app-autocomplete> -->
        </div>
        <!-- <div class="form-group">
          <app-autocomplete
            [displayIfContentIsNull]=true
            [canDelete]=false
            [enableLink]=true [typeAutocomplete]="'quote'" [title]="'Parent Quote'"
            [search]="{typeQuote:'quote', quoteId: search.parentQuote}" [singleChoice]=true [arrayContent]="fetchedQuote.parentQuotes">
          </app-autocomplete>
        </div> -->
        <!-- <div class="form-group">
          <app-autocomplete [search]="search" [canDelete]=false [enableLink]=true [typeAutocomplete]="'project'" [title]="'Projet'" [singleChoice]="true" [arrayContent]="fetchedQuote.projects">
          </app-autocomplete>
        </div> -->
      </div>
      <div class="col-sm-12 col-md-4">
        <div>
          {{'Quote edit date' | translate}}
          <input [readonly]="fetchedQuote.drawingSignature.isSigned" type="date" class="form-control" [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="fetchedQuote.detail.dateQuote.issueDateString">

          <!-- <mat-form-field>
            <input matInput
              formControlName="issueDate"
              [(ngModel)]="fetchedQuote.detail.dateQuote.issueDate"
              [matDatepicker]="picker" placeholder="{{'Quote edit date' | translate}}">
            <mat-datepicker-toggle mdSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field> -->


        </div>
        <div class="form-group">
          {{'Quote validity date' | translate}}
          <input [readonly]="fetchedQuote.drawingSignature.isSigned" type="date" class="form-control" [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="fetchedQuote.detail.dateQuote.expiryDateString">
        </div>
        <div class="form-group">
          {{'Status' | translate}}
          <select *ngIf="fetchedQuote.typeQuote === 'quote'" [disabled]="fetchedQuote.drawingSignature.isSigned" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedQuote.statusQuote" name="statusQuote">
            <option *ngFor="let n of statusQuotes" [value]="n.indexStatus">{{n.label | translate}}</option>
          </select>
          <select *ngIf="fetchedQuote.typeQuote === 'invoice'" [disabled]="fetchedQuote.drawingSignature.isSigned" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedQuote.statusQuote" name="statusQuote">
            <option *ngFor="let n of statusQuotesInvoice" [value]="n.indexStatus">{{n.label | translate}}</option>
          </select>
        </div>
        <div *ngIf="fetchedQuote.typeQuote === 'invoice' && fetchedQuote.statusQuote == 101" class="form-group">
          {{'Date Invoice Paid' | translate}}
          <input type="date" class="form-control" [ngModelOptions]="{standalone: true}" class="form-control" [(ngModel)]="fetchedQuote.detail.dateQuote.dateInvoicePaidString">
        </div>

      </div>
      <div class="col-sm-12 col-md-4">
        <div class="form-control" *ngFor="let client of fetchedQuote.historyClients">
          <h4>
            <div>{{client.profile.name}} {{client.profile.lastName}}</div>
          </h4>
          <div>{{client.profile.companyName}}</div>
          <div *ngFor="let singleAddress of client.profile.address">
            <div *ngIf="singleAddress.nameAddress ==='billing'">
              <div>{{singleAddress.address}}</div>
              <div>{{singleAddress.zip}} {{singleAddress.city}}</div>
              <div>{{client.profile.phoneNumber}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="form-group">
          {{'Title' | translate}}
          <input [readonly]="fetchedQuote.drawingSignature.isSigned" type="text" class="form-control" formControlName="name" [(ngModel)]="fetchedQuote.name" required minlength="5" placeholder="{{'Quote title' | translate}}">
        </div>
      </div>

    </div>
  </form>
